<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KayÄ±t Ol - www.hayirlisiolsun.com</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .auth-card { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 550px; }
        .auth-header { text-align: center; margin-bottom: 30px; }
        .auth-header h1 { color: #333; font-size: 28px; margin-bottom: 8px; }
        .auth-header p { color: #666; }
        .alert { padding: 12px; border-radius: 8px; margin-bottom: 20px; display: none; }
        .alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .form-group { margin-bottom: 20px; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: 500; color: #333; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 14px; transition: all 0.3s ease; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #007bff; box-shadow: 0 0 0 3px rgba(0,123,255,0.1); }
        .btn { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .btn:hover { background: #0056b3; transform: translateY(-1px); }
        .auth-footer { text-align: center; margin-top: 20px; color: #666; }
        .auth-footer a { color: #007bff; text-decoration: none; cursor: pointer; }
        .auth-footer a:hover { text-decoration: underline; }
        .password-requirements { font-size: 12px; color: #666; margin-top: 5px; }
        .password-requirements ul { margin-left: 20px; }
        .password-requirements li { margin: 3px 0; }
        .checkbox-group { display: flex; align-items: flex-start; gap: 10px; }
        .checkbox-group input[type="checkbox"] { width: auto; margin-top: 4px; }
        .checkbox-group label { margin-bottom: 0; font-size: 14px; line-height: 1.4; }
        .gender-options { display: flex; gap: 20px; }
        .gender-option { display: flex; align-items: center; gap: 8px; }
        .gender-option input[type="radio"] { width: auto; }
        
        /* Modal Styles */
        .modal-overlay { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.6); 
            z-index: 1000; 
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: white; 
            border-radius: 12px; 
            width: 90%; 
            max-width: 700px; 
            max-height: 80vh; 
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
        }
        
        .modal-header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            padding: 20px; 
            position: relative;
        }
        
        .modal-header h2 { 
            margin: 0; 
            font-size: 24px; 
        }
        
        .close-btn { 
            position: absolute; 
            top: 15px; 
            right: 20px; 
            background: none; 
            border: none; 
            color: white; 
            font-size: 28px; 
            cursor: pointer; 
            width: 35px; 
            height: 35px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: background 0.3s ease;
        }
        
        .close-btn:hover { 
            background: rgba(255, 255, 255, 0.2); 
        }
        
        .modal-body { 
            padding: 30px; 
            max-height: 60vh; 
            overflow-y: auto; 
            line-height: 1.6; 
            color: #333;
        }
        
        .modal-body h3 { 
            color: #667eea; 
            margin: 25px 0 15px 0; 
            font-size: 18px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 8px;
        }
        
        .modal-body p { 
            margin-bottom: 15px; 
            text-align: justify;
        }
        
        .modal-body ul { 
            margin: 15px 0; 
            padding-left: 25px; 
        }
        
        .modal-body li { 
            margin-bottom: 8px; 
        }
        
        .modal-footer { 
            padding: 20px 30px; 
            background: #f8f9fa; 
            border-top: 1px solid #e9ecef; 
            text-align: center;
        }
        
        .modal-footer .btn { 
            width: auto; 
            padding: 10px 30px; 
            margin: 0 10px;
        }
        
        .btn-secondary { 
            background: #6c757d; 
            border: 1px solid #6c757d;
        }
        
        .btn-secondary:hover { 
            background: #545b62; 
        }
        
        .terms-link { 
            color: #007bff; 
            text-decoration: underline; 
            cursor: pointer; 
        }
        
        .terms-note { 
            color: #c83838; 
            font-size: 14px; 
            margin-top: 5px; 
            display: block; 
        }
        
        .agreement-footer { 
            margin-top: 30px; 
            padding: 15px; 
            background: #f8f9fa; 
            border-left: 4px solid #667eea; 
            font-size: 14px; 
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            to { 
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        
        @media (max-width: 600px) {
            .auth-card { padding: 30px 20px; margin: 20px; }
            .form-row { grid-template-columns: 1fr; }
            .gender-options { flex-direction: column; gap: 10px; }
            .modal-content { 
                width: 95%; 
                max-height: 90vh; 
            }
            .modal-body { 
                padding: 20px; 
                max-height: 70vh; 
            }
            .modal-header h2 { 
                font-size: 20px; 
                padding-right: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="auth-card">
        <div class="auth-header">
            <h1>KayÄ±t Ol</h1>
            <p>Yeni hesap oluÅŸturun</p>
        </div>
        
        <div id="alertContainer"></div>
        
        <form id="registerForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="first_name">Ad</label>
                    <input type="text" id="first_name" name="first_name" required>
                </div>
                
                <div class="form-group">
                    <label for="last_name">Soyad</label>
                    <input type="text" id="last_name" name="last_name" required>
                </div>
            </div>
            
            <div class="form-group">
                <label for="username">KullanÄ±cÄ± AdÄ±</label>
                <input type="text" id="username" name="username" required minlength="3" pattern="[a-zA-Z0-9_]+">
                <div class="password-requirements">
                    <ul>
                        <li>LÃ¼tfen kullanÄ±cÄ± adÄ±nÄ±zÄ± , AdÄ±nÄ±z ve SoyadÄ±nÄ±zÄ±n baÅŸ harfi ÅŸeklinde oluÅŸturunuz.</li>
                        <li>En az 3 karakter</li>
                        <li>Sadece harf, rakam ve alt Ã§izgi</li>
                    </ul>
                </div>
            </div>
            
            <div class="form-group">
                <label for="email">E-posta</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Telefon</label>
                <input type="tel" id="phone" name="phone" placeholder="05XX XXX XX XX">
            </div>
            
            <!-- <div class="form-group">
                <label for="reference">Referans</label>
                <input type="text" id="reference" name="reference" placeholder="Referans kiÅŸi adÄ± (isteÄŸe baÄŸlÄ±)">
            </div> -->
            
            <div class="form-group">
                <label>Cinsiyet</label>
                <div class="gender-options">
                    <div class="gender-option">
                        <input type="radio" id="male" name="gender" value="male">
                        <label for="male">ğŸ‘¨ Erkek</label>
                    </div>
                    <div class="gender-option">
                        <input type="radio" id="female" name="gender" value="female">
                        <label for="female">ğŸ§• Bayan</label>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="password">Åifre</label>
                    <input type="password" id="password" name="password" required minlength="6">
                    <div class="password-requirements">
                        <ul>
                            <li>En az 6 karakter</li>
                            <li>GÃ¼venli bir ÅŸifre seÃ§in</li>
                        </ul>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="confirm_password">Åifre Tekrar</label>
                    <input type="password" id="confirm_password" name="confirm_password" required minlength="6">
                </div>
            </div>
            
            <div class="form-group full-width">
                <div class="checkbox-group">
                    <input type="checkbox" id="terms_accepted" name="terms_accepted" required>
                    <label for="terms_accepted">
                        <a href="#" onclick="openUserAgreementModal(event)" class="terms-link"><strong>KiÅŸisel verilerin korunmasÄ±yla ilgili aydÄ±nlatma metni 
                        </strong></a>  <strong>(6698 SAYILI KÄ°ÅÄ°SEL VERÄ°LERÄ°N KORUNMASI KANUNU KAPSAMINDA AYDINLATMA METNÄ°)</strong>'nÄ± okudum, anladÄ±m ve kabul ediyorum. 
                        KiÅŸisel verilerimin iÅŸlenmesine onay veriyorum.
                    </label>
                </div>
                <small class="terms-note">
                    ğŸ“„ KullanÄ±cÄ± SÃ¶zleÅŸmesi'ne tÄ±klayarak detaylarÄ± okuyup, indirip imzalayÄ±nÄ±z. "hayirlisiolsuntr@gmail.com" admin mail hesabÄ±na imzalÄ± belgeyi gÃ¶nderdiÄŸinizde hesabÄ±nÄ±z aktif olacaktÄ±r.
                </small>
            </div>
            
            <button type="submit" class="btn">KayÄ±t Ol</button>
        </form>
        
        <div class="auth-footer">
            <p>Zaten hesabÄ±nÄ±z var mÄ±? <a onclick="goToLogin()">GiriÅŸ yapÄ±n</a></p>
            <p><a onclick="goToHome()">Ana Sayfaya DÃ¶n</a></p>
        </div>
    </div>
    
    <!-- User Agreement Modal -->
    <div id="userAgreementModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>6698 SAYILI KÄ°ÅÄ°SEL VERÄ°LERÄ°N KORUNMASI KANUNU KAPSAMINDA AYDINLATMA METNÄ°</h2>
                <button class="close-btn" onclick="closeUserAgreementModal()">&times;</button>
            </div>
            <div class="modal-body">        
                <h3>1.Veri Sorumlusu</h3>
                <p>6698 sayÄ±lÄ± KiÅŸisel Verilerin KorunmasÄ± Kanunu uyarÄ±nca www.hayirlisiolsun.com veri sorumlusu olarak hareket etmektedir</p>
                
                <h3>2-Verilerin Ä°ÅŸlenmesi</h3>
                <p>www.hayirlisiolsun.com olarak dÃ¼zenlediÄŸiniz bu form uyarÄ±nca kiÅŸisel verileriniz; iÅŸbu etkinlik ve diÄŸer etkinliklerin planlanmasÄ±, duyurulmasÄ±, Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerin bilgilendirilmesi ve oluÅŸumumuzun tanÄ±tÄ±lmasÄ± amacÄ±yla katÄ±lÄ±mcÄ±larÄ±n katÄ±lÄ±m durumu online/fiziki form ile toplanmakta, kimlik bilgisi, fotoÄŸraf ve video Ã§ekimleri kaydedilmekte, etkinlik sÄ±rasÄ±nda Ã§ekilen gÃ¶rÃ¼ntÃ¼ler internet sitesi, sosyal medya hesaplarÄ±, dergi ve yazÄ±lÄ±/gÃ¶rsel her tÃ¼rlÃ¼ sosyal platformlarÄ±mÄ±zda paylaÅŸÄ±labilmekte, Ã§alÄ±ÅŸma faaliyetlerinin sÃ¼rdÃ¼rÃ¼lebilmesi, yetkililerin eriÅŸebilmesi, talep ve ÅŸikayetlerin takibi, risk yÃ¶netim sÃ¼reÃ§lerinin yÃ¶netilmesi, gÃ¶revlendirme, raporlama, planlama, insan kaynaklarÄ± ve iletiÅŸim faaliyetlerinin yÃ¼rÃ¼tÃ¼lmesi iÃ§in iÅŸlenmektedir.<p>
                <h3>3-KiÅŸisel Verilerinizin AktarÄ±lmasÄ±</h3>
                <p>Site yÃ¶netimimiz, 6698 sayÄ±lÄ± Kanunun 4â€™Ã¼ncÃ¼ maddesinde sayÄ±lan genel ilkelere ve 8 ve 9â€™uncu maddesinde Ã¶ngÃ¶rÃ¼len ÅŸartlara uymak ve gerekli gÃ¼venlik Ã¶nlemlerini almak kaydÄ±yla, yukarÄ±da belirtilen amaÃ§larla sÄ±nÄ±rlÄ± olmak Ã¼zere kiÅŸisel verilerinizi yasal olarak aktarÄ±lmasÄ± gereken idari ve resmi makamlara, faaliyetlerimizi yÃ¼rÃ¼tmek Ã¼zere dÄ±ÅŸarÄ±dan hizmet alÄ±nan Ã¼Ã§Ã¼ncÃ¼ kiÅŸilere, iÅŸbirliÄŸi yaptÄ±ÄŸÄ±mÄ±z ya da proje/program ortaÄŸÄ± olunan yurtiÃ§i/yurtdÄ±ÅŸÄ±/uluslararasÄ± kuruluÅŸlara, alt yÃ¼klenicilere, baÄŸÄ±msÄ±z denetim ve destek hizmeti alÄ±nan kuruluÅŸlar gibi tÃ¼zel kiÅŸilere ve iÅŸbirliÄŸi iÃ§erisinde olan Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerin hukuki ve ticari gÃ¼venliÄŸinin saÄŸlanmasÄ± ve elektronik ve fiziksel ortamlarÄ±n gÃ¼venliÄŸinin saÄŸlanmasÄ± ile hukuki zorunluluklar nedeniyle ve yasal sÄ±nÄ±rlamalar Ã§erÃ§evesinde aktarÄ±labilecektir.</p>
                
                <h3>4-Veri Sahibinin HaklarÄ±</h3>
                <p>6698 sayÄ±lÄ± Kanunun 11. maddesi uyarÄ±nca bu metnin 6. maddesinde Ã¶ngÃ¶rÃ¼len usule gÃ¶re Åubemize baÅŸvurarak kiÅŸisel verilerinizin;</p>
                <ul>
                    <li>Ä°ÅŸlenip iÅŸlenmediÄŸini Ã¶ÄŸrenme, </li>
                    <li>Ä°ÅŸlenmiÅŸse bilgi talep etme,</li>
                    <li>Ä°ÅŸlenme amacÄ±nÄ± ve amacÄ±na uygun kullanÄ±lÄ±p kullanÄ±lmadÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenme, </li>
                    <li>Yurt iÃ§inde / yurt dÄ±ÅŸÄ±nda aktarÄ±ldÄ±ÄŸÄ± 3. kiÅŸileri bilme, </li>
                    <li>Eksik / yanlÄ±ÅŸ iÅŸlenmiÅŸse dÃ¼zeltilmesini isteme,  </li>
                    <li>KiÅŸisel verilerin iÅŸlenmesini gerektiren sebeplerin ortadan kalkmasÄ± halinde kiÅŸisel verilerin silinmesini veya yok edilmesini isteme,  </li>
                    <li>AktarÄ±ldÄ±ÄŸÄ± 3. kiÅŸilere yukarÄ±da sayÄ±lan 5. ve 6. bentler uyarÄ±nca yapÄ±lan iÅŸlemlerin bildirilmesini isteme,  </li>
                    <li>MÃ¼nhasÄ±ran otomatik sistemler ile analiz edilmesi nedeniyle aleyhinize bir sonucun ortaya Ã§Ä±kmasÄ±na itiraz etme,  </li>
                    <li>Kanuna aykÄ±rÄ± olarak iÅŸlenmesi sebebiyle zarara uÄŸramanÄ±z hÃ¢linde zararÄ±n giderilmesini talep etme hakkÄ±na sahipsiniz.  </li>
                </ul>
                
                <h3>5-	Verilerin Ä°ÅŸlenmesi ve AktarÄ±lmasÄ±na Dair AÃ§Ä±k RÄ±za Metni</h3>
                <p>www.hayirlisiolsun.com tarafÄ±ndan tarafÄ±ma iletilen etkinlik, program ve projelere katÄ±lÄ±mla ilgili aydÄ±nlatma metnini okudum ve anladÄ±m. AÃ§Ä±k rÄ±za vermek zorunda olmadÄ±ÄŸÄ±m hususunda bilgi sahibiyim. Bu kapsamda katÄ±lÄ±m durumumun siteye kayÄ±t suretiyle toplanmasÄ±na, Ad, Soyad, Kimlik Bilgileri, FotoÄŸraf, Video Ã‡ekimi, Ses KaydÄ± ve diÄŸer kiÅŸisel verilerimin aydÄ±nlatma metninde belirtilen amaÃ§larla iÅŸlenip kaydedilmesine ve www.hayÄ±rlÄ±olsun.com ve bu kapsamda teÅŸekkÃ¼l etmiÅŸ bulunan kuruluÅŸlarla birlikte iÅŸbirliÄŸi yapÄ±lan diÄŸer Ã¼Ã§Ã¼ncÃ¼ kiÅŸi veya kurumlara aktarÄ±lmasÄ±na aÃ§Ä±k rÄ±zam vardÄ±r. AÃ§Ä±k rÄ±zamÄ± iÅŸbu siteye kayÄ±t olurken ilettiÄŸimi/gÃ¶sterdiÄŸimi beyan ederim.</p>
                
                <h3>Ä°mza</h3>
                <p>Ä°sim-Soyisim:</p>
                <p>Tarih:  </p>
                <p>Ä°mza::</p>

                <!-- <h3>7. Ä°letiÅŸim</h3>
                <p>SorularÄ±nÄ±z iÃ§in platform yÃ¶netimi ile iletiÅŸime geÃ§ebilirsiniz. Geri bildirimleriniz deÄŸerlidir.</p> -->
                
                <!-- <p class="agreement-footer">
                    <strong>Son GÃ¼ncelleme:</strong> 28 EylÃ¼l 2025<br>
                    Bu sÃ¶zleÅŸme TÃ¼rk hukuku kapsamÄ±nda dÃ¼zenlenmiÅŸtir.
                </p>
            </div> -->
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeUserAgreementModal()">Kapat</button>
                <button class="btn btn-success" onclick="downloadUserAgreementHTML()">ğŸ“„ Ä°ndir</button>
                <button class="btn" onclick="acceptAndCloseModal()">Kabul Et ve Kapat</button>
                
                <!-- PDF Conversion Instructions -->
                <div class="pdf-instructions">
                    <div class="pdf-help">
                        <!-- <strong>ğŸ“„ PDF Olarak Kaydetme:</strong> Ctrl+P â†’ "PDF olarak kaydet" â†’ Kaydet -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="assets/js/database-fixed.js"></script>
    <script src="assets/js/auth.js"></script>
    <script>
        // Check if user is already logged in
        window.addEventListener('DOMContentLoaded', function() {
            const currentUser = getCurrentUser();
            if (currentUser) {
                if (currentUser.role === 'admin') {
                    window.location.href = 'admin/dashboard.html';
                } else {
                    window.location.href = 'dashboard.html';
                }
                return;
            }
        });

        // Handle registration form submission
        document.getElementById('registerForm').addEventListener('submit', handleRegisterSubmit);
        
        async function handleRegisterSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const userData = {
                username: formData.get('username').trim(),
                email: formData.get('email').trim(),
                password: formData.get('password'),
                confirm_password: formData.get('confirm_password'),
                first_name: formData.get('first_name').trim(),
                last_name: formData.get('last_name').trim(),
                phone: formData.get('phone') ? formData.get('phone').trim() : '',
                reference: formData.get('reference') ? formData.get('reference').trim() : '',
                gender: formData.get('gender'),
                terms_accepted: formData.get('terms_accepted') === 'on'
            };
            
            // Validation
            if (!userData.username || !userData.email || !userData.password || !userData.first_name || !userData.last_name) {
                showAlert('TÃ¼m zorunlu alanlarÄ± doldurun.', 'error');
                return;
            }
            
            if (!userData.terms_accepted) {
                showAlert('KullanÄ±cÄ± sÃ¶zleÅŸmesini kabul etmelisiniz.', 'error');
                return;
            }
            
            if (userData.password.length < 6) {
                showAlert('Åifre en az 6 karakter olmalÄ±dÄ±r.', 'error');
                return;
            }
            
            if (userData.password !== userData.confirm_password) {
                showAlert('Åifreler eÅŸleÅŸmiyor.', 'error');
                return;
            }
            
            if (userData.username.length < 3) {
                showAlert('KullanÄ±cÄ± adÄ± en az 3 karakter olmalÄ±dÄ±r.', 'error');
                return;
            }
            
            const usernameRegex = /^[a-zA-Z0-9_]+$/;
            if (!usernameRegex.test(userData.username)) {
                showAlert('KullanÄ±cÄ± adÄ± sadece harf, rakam ve alt Ã§izgi iÃ§erebilir.', 'error');
                return;
            }
            
            try {
                showAlert('â³ KayÄ±t iÅŸlemi devam ediyor...', 'success');
                
                console.log('Registering user:', userData);
                const result = await register(userData);
                console.log('Register result:', result);
                
                if (result && result.success) {
                    showAlert('ğŸ‰ KAYIT BAÅARILI! GiriÅŸ sayfasÄ±na yÃ¶nlendiriliyorsunuz...', 'success');
                    
                    // Clear form
                    e.target.reset();
                    
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 2500);
                } else {
                    showAlert(result?.message || 'KayÄ±t iÅŸlemi baÅŸarÄ±sÄ±z!', 'error');
                }
            } catch (error) {
                console.error('Register form error:', error);
                showAlert('âŒ KayÄ±t iÅŸlemi sÄ±rasÄ±nda hata oluÅŸtu. Tekrar deneyin.', 'error');
            }
        }
        
        // Password confirmation validation
        document.getElementById('confirm_password').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirmPassword = this.value;
            
            if (password !== confirmPassword) {
                this.setCustomValidity('Åifreler eÅŸleÅŸmiyor');
            } else {
                this.setCustomValidity('');
            }
        });
        
        // Username validation
        document.getElementById('username').addEventListener('input', function() {
            const username = this.value;
            const regex = /^[a-zA-Z0-9_]+$/;
            
            if (username && !regex.test(username)) {
                this.setCustomValidity('KullanÄ±cÄ± adÄ± sadece harf, rakam ve alt Ã§izgi iÃ§erebilir');
            } else {
                this.setCustomValidity('');
            }
        });
        
        function goToLogin() {
            window.location.href = 'login.html';
        }
        
        function goToHome() {
            window.location.href = 'index.html';
        }
        
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            alert.style.display = 'block';
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alert);
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }
        
        function downloadUserAgreement(event) {
            event.preventDefault();
            
            // Get PDF from localStorage (uploaded by admin)
            const pdfData = localStorage.getItem('userAgreementPDF');
            const pdfName = localStorage.getItem('userAgreementPDFName') || 'kullanici-sozlesmesi.pdf';
            
            if (!pdfData) {
                // If no PDF uploaded by admin, show default message
                alert('KullanÄ±cÄ± SÃ¶zleÅŸmesi PDF\'i henÃ¼z yÃ¼klenmemiÅŸ. LÃ¼tfen admin ile iletiÅŸime geÃ§in.');
                return;
            }
            
            try {
                // Create blob from base64 data
                const byteCharacters = atob(pdfData.split(',')[1]);
                const byteNumbers = new Array(byteCharacters.length);
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'application/pdf' });
                
                // Create download link
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = pdfName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                console.log('âœ… PDF downloaded:', pdfName);
                showAlert('ğŸ“„ KullanÄ±cÄ± SÃ¶zleÅŸmesi indirildi: ' + pdfName, 'success');
                
            } catch (error) {
                console.error('âŒ PDF download error:', error);
                alert('PDF indirme hatasÄ±: ' + error.message);
            }
        }
        
        // Modal Functions
        function openUserAgreementModal(event) {
            event.preventDefault();
            const modal = document.getElementById('userAgreementModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function downloadUserAgreementHTML() {
            const agreementContent = `
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KullanÄ±cÄ± SÃ¶zleÅŸmesi - KVKK</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; background: white; }
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #007bff; padding-bottom: 20px; }
        .section { margin-bottom: 25px; }
        .section h3 { color: #007bff; margin-bottom: 15px; }
        .highlight { background: #fff3cd; padding: 8px; border-left: 4px solid #ffc107; margin: 10px 0; }
        .contact-info { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 20px; }
        @media print { body { margin: 20px; } }
    </style>
</head>
<body>
    <div class="header">
        <h2>6698 SAYILI KÄ°ÅÄ°SEL VERÄ°LERÄ°N KORUNMASI KANUNU KAPSAMINDA AYDINLATMA METNÄ°</h2>
    </div>

    <div class="section">
        <h3>1-Veri Sorumlusu</h3>
        <p>6698 sayÄ±lÄ± KiÅŸisel Verilerin KorunmasÄ± Kanunu uyarÄ±nca www.hayirlisiolsun.com veri sorumlusu olarak hareket etmektedir.</p>
        <div class="contact-info">
    </div>

    <div class="section">
        <h3>2-Verilerin Ä°ÅŸlenmesi</h3>
        <p>www.hayirlisiolsun.com olarak dÃ¼zenlediÄŸiniz bu form uyarÄ±nca kiÅŸisel verileriniz; iÅŸbu etkinlik ve diÄŸer etkinliklerin planlanmasÄ±, duyurulmasÄ±, Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerin bilgilendirilmesi ve oluÅŸumumuzun tanÄ±tÄ±lmasÄ± amacÄ±yla katÄ±lÄ±mcÄ±larÄ±n katÄ±lÄ±m durumu online/fiziki form ile toplanmakta, kimlik bilgisi, fotoÄŸraf ve video Ã§ekimleri kaydedilmekte, etkinlik sÄ±rasÄ±nda Ã§ekilen gÃ¶rÃ¼ntÃ¼ler internet sitesi, sosyal medya hesaplarÄ±, dergi ve yazÄ±lÄ±/gÃ¶rsel her tÃ¼rlÃ¼ sosyal platformlarÄ±mÄ±zda paylaÅŸÄ±labilmekte, Ã§alÄ±ÅŸma faaliyetlerinin sÃ¼rdÃ¼rÃ¼lebilmesi, yetkililerin eriÅŸebilmesi, talep ve ÅŸikayetlerin takibi, risk yÃ¶netim sÃ¼reÃ§lerinin yÃ¶netilmesi, gÃ¶revlendirme, raporlama, planlama, insan kaynaklarÄ± ve iletiÅŸim faaliyetlerinin yÃ¼rÃ¼tÃ¼lmesi iÃ§in iÅŸlenmektedir.</p>
        
    </div>

    <div class="section">
        <h3>3-KiÅŸisel Verilerinizin AktarÄ±lmasÄ±</h3>
        <p>Site yÃ¶netimimiz, 6698 sayÄ±lÄ± Kanunun 4â€™Ã¼ncÃ¼ maddesinde sayÄ±lan genel ilkelere ve 8 ve 9â€™uncu maddesinde Ã¶ngÃ¶rÃ¼len ÅŸartlara uymak ve gerekli gÃ¼venlik Ã¶nlemlerini almak kaydÄ±yla, yukarÄ±da belirtilen amaÃ§larla sÄ±nÄ±rlÄ± olmak Ã¼zere kiÅŸisel verilerinizi yasal olarak aktarÄ±lmasÄ± gereken idari ve resmi makamlara, faaliyetlerimizi yÃ¼rÃ¼tmek Ã¼zere dÄ±ÅŸarÄ±dan hizmet alÄ±nan Ã¼Ã§Ã¼ncÃ¼ kiÅŸilere, iÅŸbirliÄŸi yaptÄ±ÄŸÄ±mÄ±z ya da proje/program ortaÄŸÄ± olunan yurtiÃ§i/yurtdÄ±ÅŸÄ±/uluslararasÄ± kuruluÅŸlara, alt yÃ¼klenicilere, baÄŸÄ±msÄ±z denetim ve destek hizmeti alÄ±nan kuruluÅŸlar gibi tÃ¼zel kiÅŸilere ve iÅŸbirliÄŸi iÃ§erisinde olan Ã¼Ã§Ã¼ncÃ¼ kiÅŸilerin hukuki ve ticari gÃ¼venliÄŸinin saÄŸlanmasÄ± ve elektronik ve fiziksel ortamlarÄ±n gÃ¼venliÄŸinin saÄŸlanmasÄ± ile hukuki zorunluluklar nedeniyle ve yasal sÄ±nÄ±rlamalar Ã§erÃ§evesinde aktarÄ±labilecektir.</p>
        
    </div>

    <h3>4-Veri Sahibinin HaklarÄ±</h3>
                <p>6698 sayÄ±lÄ± Kanunun 11. maddesi uyarÄ±nca bu metnin 6. maddesinde Ã¶ngÃ¶rÃ¼len usule gÃ¶re Åubemize baÅŸvurarak kiÅŸisel verilerinizin;</p>
                <ul>
                    <li>Ä°ÅŸlenip iÅŸlenmediÄŸini Ã¶ÄŸrenme, </li>
                    <li>Ä°ÅŸlenmiÅŸse bilgi talep etme,</li>
                    <li>Ä°ÅŸlenme amacÄ±nÄ± ve amacÄ±na uygun kullanÄ±lÄ±p kullanÄ±lmadÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenme, </li>
                    <li>Yurt iÃ§inde / yurt dÄ±ÅŸÄ±nda aktarÄ±ldÄ±ÄŸÄ± 3. kiÅŸileri bilme, </li>
                    <li>Eksik / yanlÄ±ÅŸ iÅŸlenmiÅŸse dÃ¼zeltilmesini isteme,  </li>
                    <li>KiÅŸisel verilerin iÅŸlenmesini gerektiren sebeplerin ortadan kalkmasÄ± halinde kiÅŸisel verilerin silinmesini veya yok edilmesini isteme,  </li>
                    <li>AktarÄ±ldÄ±ÄŸÄ± 3. kiÅŸilere yukarÄ±da sayÄ±lan 5. ve 6. bentler uyarÄ±nca yapÄ±lan iÅŸlemlerin bildirilmesini isteme,  </li>
                    <li>MÃ¼nhasÄ±ran otomatik sistemler ile analiz edilmesi nedeniyle aleyhinize bir sonucun ortaya Ã§Ä±kmasÄ±na itiraz etme,  </li>
                    <li>Kanuna aykÄ±rÄ± olarak iÅŸlenmesi sebebiyle zarara uÄŸramanÄ±z hÃ¢linde zararÄ±n giderilmesini talep etme hakkÄ±na sahipsiniz.  </li>
                </ul>

   <h3>5-	Verilerin Ä°ÅŸlenmesi ve AktarÄ±lmasÄ±na Dair AÃ§Ä±k RÄ±za Metni</h3>
                <p>www.hayirlisiolsun.com tarafÄ±ndan tarafÄ±ma iletilen etkinlik, program ve projelere katÄ±lÄ±mla ilgili aydÄ±nlatma metnini okudum ve anladÄ±m. AÃ§Ä±k rÄ±za vermek zorunda olmadÄ±ÄŸÄ±m hususunda bilgi sahibiyim. Bu kapsamda katÄ±lÄ±m durumumun siteye kayÄ±t suretiyle toplanmasÄ±na, Ad, Soyad, Kimlik Bilgileri, FotoÄŸraf, Video Ã‡ekimi, Ses KaydÄ± ve diÄŸer kiÅŸisel verilerimin aydÄ±nlatma metninde belirtilen amaÃ§larla iÅŸlenip kaydedilmesine ve www.hayirlisiolsun.com ve bu kapsamda teÅŸekkÃ¼l etmiÅŸ bulunan kuruluÅŸlarla birlikte iÅŸbirliÄŸi yapÄ±lan diÄŸer Ã¼Ã§Ã¼ncÃ¼ kiÅŸi veya kurumlara aktarÄ±lmasÄ±na aÃ§Ä±k rÄ±zam vardÄ±r. AÃ§Ä±k rÄ±zamÄ± iÅŸbu siteye kayÄ±t olurken ilettiÄŸimi/gÃ¶sterdiÄŸimi beyan ederim.</p>
                
                <h3>Ä°mza</h3>
                <p>Ä°sim-Soyisim:</p>
                <p>Tarih:  </p>
                <p>Ä°mza::</p>
    </div>

 

    <div class="contact-info" style="margin-top: 40px; text-align: center;">
        <p><strong>Bu belgeyi PDF olarak kaydetmek iÃ§in:</strong></p>
        <p>Ctrl+P â†’ "PDF olarak kaydet" â†’ Kaydet</p>
    </div>
</body>
</html>`;

            // Create blob and download
            const blob = new Blob([agreementContent], { type: 'text/html;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Kullanici-Sozlesmesi-KVKK.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showAlert('ğŸ“„ KullanÄ±cÄ± SÃ¶zleÅŸmesi HTML dosyasÄ± indirildi!', 'success');
        }
        
        function closeUserAgreementModal() {
            const modal = document.getElementById('userAgreementModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restore background scrolling
        }
        
        function acceptAndCloseModal() {
            // Check the terms checkbox
            const termsCheckbox = document.getElementById('terms_accepted');
            termsCheckbox.checked = true;
            
            // Close modal
            closeUserAgreementModal();
            
            // Show confirmation message
            showAlert('âœ… KullanÄ±cÄ± SÃ¶zleÅŸmesi kabul edildi!', 'success');
        }
        
        // Close modal when clicking outside of it
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('userAgreementModal');
            if (event.target === modal) {
                closeUserAgreementModal();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('userAgreementModal');
                if (modal.style.display === 'block') {
                    closeUserAgreementModal();
                }
            }
        });
    </script>
</body>
</html>